<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Factory that creates a proposal generator — createProposalGenerator â€¢ BayesianTools</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">


<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>
  
  
<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">BayesianTools</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/BayesianTools.html">Get Started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/florianhartig/BayesianTools">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Factory that creates a proposal generator</h1>
    </div>

    
    <p>Factory that creates a proposal generator</p>
    

    <pre class="usage"><span class='fu'>createProposalGenerator</span>(<span class='no'>covariance</span>, <span class='kw'>gibbsProbabilities</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>gibbsWeights</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>otherDistribution</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>otherDistributionLocation</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>otherDistributionScaled</span> <span class='kw'>=</span> <span class='no'>F</span>,
  <span class='kw'>message</span> <span class='kw'>=</span> <span class='no'>F</span>, <span class='kw'>method</span> <span class='kw'>=</span> <span class='st'>"chol"</span>, <span class='kw'>scalingFactor</span> <span class='kw'>=</span> <span class='fl'>2.38</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>covariance</th>
      <td><p>covariance matrix. Can also be vector of the sqrt of diagonal elements --&gt; standard deviation</p></td>
    </tr>
    <tr>
      <th>gibbsProbabilities</th>
      <td><p>optional probabilities for the number of parameters to vary in a Metropolis within gibbs style - for 4 parameters, c(1,1,0.5,0) means that at most 3 parameters will be varied, and it is double as likely to vary one or two than varying 3</p></td>
    </tr>
    <tr>
      <th>gibbsWeights</th>
      <td><p>optional probabilities for parameters to be varied in a Metropolis within gibbs style - default ist equal weight for all parameters - for 4 parameters, c(1,1,1,100) would mean that if 2 parameters would be selected, parameter 4 would be 100 times more likely to be picked than the others. If 4 is selected, the remaining parameters have equal probability.</p></td>
    </tr>
    <tr>
      <th>otherDistribution</th>
      <td><p>optional additinal distribution to be mixed with the default multivariate normal. The distribution needs to accept a parameter vector (to allow for the option of making the distribution dependend on the parameter values), but it is still assumed that the change from the current values is returned, not the new absolute values.</p></td>
    </tr>
    <tr>
      <th>otherDistributionLocation</th>
      <td><p>a vector with 0 and 1, denoting which parameters are modified by the otherDistribution</p></td>
    </tr>
    <tr>
      <th>otherDistributionScaled</th>
      <td><p>should the other distribution be scaled if gibbs updates are calculated?</p></td>
    </tr>
    <tr>
      <th>message</th>
      <td><p>print out parameter settings</p></td>
    </tr>
    <tr>
      <th>method</th>
      <td><p>method for covariance decomposition</p></td>
    </tr>
    <tr>
      <th>scalingFactor</th>
      <td><p>scaling factor for the proposals</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <p><code><a href='updateProposalGenerator.html'>updateProposalGenerator</a></code></p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='no'>testMatrix</span> <span class='kw'>=</span> <span class='fu'>matrix</span>(<span class='fu'>rep</span>(<span class='fu'>c</span>(<span class='fl'>0</span>,<span class='fl'>0</span>,<span class='fl'>0</span>,<span class='fl'>0</span>), <span class='fl'>1000</span>), <span class='kw'>ncol</span> <span class='kw'>=</span> <span class='fl'>4</span>)
<span class='no'>testVector</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='fl'>0</span>,<span class='fl'>0</span>,<span class='fl'>0</span>,<span class='fl'>0</span>)


<span class='co'>##Standard multivariate normal proposal generator</span>

<span class='no'>testGenerator</span> <span class='kw'>&lt;-</span> <span class='fu'>createProposalGenerator</span>(<span class='kw'>covariance</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='fl'>1</span>,<span class='fl'>1</span>,<span class='fl'>1</span>,<span class='fl'>1</span>), <span class='kw'>message</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)</div><div class='output co'>#&gt; Proposalgenerator createdcovariance set to:
#&gt;       [,1] [,2] [,3] [,4]
#&gt; [1,]    1    0    0    0
#&gt; [2,]    0    1    0    0
#&gt; [3,]    0    0    1    0
#&gt; [4,]    0    0    0    1
#&gt; covarianceDecomp set to:
#&gt;       [,1] [,2] [,3] [,4]
#&gt; [1,]    1    0    0    0
#&gt; [2,]    0    1    0    0
#&gt; [3,]    0    0    1    0
#&gt; [4,]    0    0    0    1
#&gt; gibbsProbabilities set to:
#&gt;  NULL
#&gt; gibbsWeights set to:
#&gt;  NULL
#&gt; otherDistribution set to:
#&gt;  NULL
#&gt; otherDistributionLocation set to:
#&gt;  NULL</div><div class='input'>
<span class='fu'>methods</span>(<span class='kw'>class</span> <span class='kw'>=</span> <span class='st'>"proposalGenerator"</span>)</div><div class='output co'>#&gt; [1] print
#&gt; see '?methods' for accessing help and source code</div><div class='input'><span class='fu'>print</span>(<span class='no'>testGenerator</span>)</div><div class='output co'>#&gt; covariance set to:
#&gt;       [,1] [,2] [,3] [,4]
#&gt; [1,]    1    0    0    0
#&gt; [2,]    0    1    0    0
#&gt; [3,]    0    0    1    0
#&gt; [4,]    0    0    0    1
#&gt; covarianceDecomp set to:
#&gt;       [,1] [,2] [,3] [,4]
#&gt; [1,]    1    0    0    0
#&gt; [2,]    0    1    0    0
#&gt; [3,]    0    0    1    0
#&gt; [4,]    0    0    0    1
#&gt; gibbsProbabilities set to:
#&gt;  NULL
#&gt; gibbsWeights set to:
#&gt;  NULL
#&gt; otherDistribution set to:
#&gt;  NULL
#&gt; otherDistributionLocation set to:
#&gt;  NULL</div><div class='input'>
<span class='no'>x</span> <span class='kw'>=</span> <span class='no'>testGenerator</span>$<span class='fu'>returnProposal</span>(<span class='no'>testVector</span>)
<span class='no'>x</span></div><div class='output co'>#&gt; [1] -0.08528815  0.96024687 -0.21403684  0.86855229</div><div class='input'>
<span class='no'>x</span> <span class='kw'>&lt;-</span> <span class='no'>testGenerator</span>$<span class='fu'>returnProposalMatrix</span>(<span class='no'>testMatrix</span>)
<span class='fu'>boxplot</span>(<span class='no'>x</span>)</div><div class='img'><img src='createProposalGenerator-21.png' alt='' width='700' height='432.632880098887' /></div><div class='input'>
<span class='co'>##Changing the covariance</span>
<span class='no'>testGenerator</span>$<span class='no'>covariance</span> <span class='kw'>=</span> <span class='fu'>diag</span>(<span class='fu'>rep</span>(<span class='fl'>100</span>,<span class='fl'>4</span>))
<span class='no'>testGenerator</span> <span class='kw'>&lt;-</span> <span class='no'>testGenerator</span>$<span class='fu'><a href='updateProposalGenerator.html'>updateProposalGenerator</a></span>(<span class='no'>testGenerator</span>, <span class='kw'>message</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)</div><div class='output co'>#&gt; Proposalgenerator settings changedcovariance set to:
#&gt;       [,1] [,2] [,3] [,4]
#&gt; [1,]  100    0    0    0
#&gt; [2,]    0  100    0    0
#&gt; [3,]    0    0  100    0
#&gt; [4,]    0    0    0  100
#&gt; covarianceDecomp set to:
#&gt;       [,1] [,2] [,3] [,4]
#&gt; [1,]   10    0    0    0
#&gt; [2,]    0   10    0    0
#&gt; [3,]    0    0   10    0
#&gt; [4,]    0    0    0   10
#&gt; gibbsProbabilities set to:
#&gt;  NULL
#&gt; gibbsWeights set to:
#&gt;  NULL
#&gt; otherDistribution set to:
#&gt;  NULL
#&gt; otherDistributionLocation set to:
#&gt;  NULL</div><div class='input'>
<span class='no'>testGenerator</span>$<span class='fu'>returnProposal</span>(<span class='no'>testVector</span>)</div><div class='output co'>#&gt; [1] -6.237000  2.271769  0.885039 -3.262444</div><div class='input'><span class='no'>x</span> <span class='kw'>&lt;-</span> <span class='no'>testGenerator</span>$<span class='fu'>returnProposalMatrix</span>(<span class='no'>testMatrix</span>)
<span class='fu'>boxplot</span>(<span class='no'>x</span>)</div><div class='img'><img src='createProposalGenerator-22.png' alt='' width='700' height='432.632880098887' /></div><div class='input'>

<span class='co'>##-Changing the gibbs probabilities / probability to modify 1-n parameters</span>

<span class='no'>testGenerator</span>$<span class='no'>gibbsProbabilities</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='fl'>1</span>,<span class='fl'>1</span>,<span class='fl'>0</span>,<span class='fl'>0</span>)
<span class='no'>testGenerator</span> <span class='kw'>&lt;-</span> <span class='no'>testGenerator</span>$<span class='fu'><a href='updateProposalGenerator.html'>updateProposalGenerator</a></span>(<span class='no'>testGenerator</span>)

<span class='no'>testGenerator</span>$<span class='fu'>returnProposal</span>(<span class='no'>testVector</span>)</div><div class='output co'>#&gt; [1] -27.17082   0.00000 -26.53460   0.00000</div><div class='input'><span class='no'>x</span> <span class='kw'>&lt;-</span> <span class='no'>testGenerator</span>$<span class='fu'>returnProposalMatrix</span>(<span class='no'>testMatrix</span>)
<span class='fu'>boxplot</span>(<span class='no'>x</span>)</div><div class='img'><img src='createProposalGenerator-23.png' alt='' width='700' height='432.632880098887' /></div><div class='input'>

<span class='co'>##-Changing the gibbs weights / probability to pick each parameter</span>

<span class='no'>testGenerator</span>$<span class='no'>gibbsWeights</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='fl'>0.3</span>,<span class='fl'>0.3</span>,<span class='fl'>0.3</span>,<span class='fl'>100</span>)
<span class='no'>testGenerator</span> <span class='kw'>&lt;-</span> <span class='no'>testGenerator</span>$<span class='fu'><a href='updateProposalGenerator.html'>updateProposalGenerator</a></span>(<span class='no'>testGenerator</span>)

<span class='no'>testGenerator</span>$<span class='fu'>returnProposal</span>(<span class='no'>testVector</span>)</div><div class='output co'>#&gt; [1] 11.78213  0.00000  0.00000 17.64915</div><div class='input'><span class='no'>x</span> <span class='kw'>&lt;-</span> <span class='no'>testGenerator</span>$<span class='fu'>returnProposalMatrix</span>(<span class='no'>testMatrix</span>)
<span class='fu'>boxplot</span>(<span class='no'>x</span>)</div><div class='img'><img src='createProposalGenerator-24.png' alt='' width='700' height='432.632880098887' /></div><div class='input'>

<span class='co'>##-Adding another function</span>

<span class='no'>otherFunction</span> <span class='kw'>&lt;-</span> <span class='kw'>function</span>(<span class='no'>x</span>) <span class='fu'>sample.int</span>(<span class='fl'>10</span>,<span class='fl'>1</span>)

<span class='no'>testGenerator</span> <span class='kw'>&lt;-</span> <span class='fu'>createProposalGenerator</span>(
  <span class='kw'>covariance</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='fl'>1</span>,<span class='fl'>1</span>,<span class='fl'>1</span>),
  <span class='kw'>otherDistribution</span> <span class='kw'>=</span> <span class='no'>otherFunction</span>,
  <span class='kw'>otherDistributionLocation</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='fl'>0</span>,<span class='fl'>0</span>,<span class='fl'>0</span>,<span class='fl'>1</span>),
  <span class='kw'>otherDistributionScaled</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>
)

<span class='no'>testGenerator</span>$<span class='fu'>returnProposal</span>(<span class='no'>testVector</span>)</div><div class='output co'>#&gt; [1]  0.7176416  1.8980108 -2.8475711  3.5700000</div><div class='input'><span class='no'>x</span> <span class='kw'>&lt;-</span> <span class='no'>testGenerator</span>$<span class='fu'>returnProposalMatrix</span>(<span class='no'>testMatrix</span>)
<span class='fu'>boxplot</span>(<span class='no'>x</span>)</div><div class='img'><img src='createProposalGenerator-25.png' alt='' width='700' height='432.632880098887' /></div><div class='input'><span class='fu'>table</span>(<span class='no'>x</span>[,<span class='fl'>4</span>])</div><div class='output co'>#&gt; 
#&gt;  1.19  2.38  3.57  4.76  5.95  7.14  8.33  9.52 10.71  11.9 
#&gt;   129    92   113    97    96    87    89    99    98   100 </div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

    <h2>Author</h2>
    
Florian Hartig

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Florian Hartig, Francesco Minunno, Stefan  Paul.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>
